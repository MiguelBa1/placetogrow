import{d as F,u as $,m as D,r as n,o as r,c as b,w as l,a as y,f as g,t as i,e as o,b as u,h as v,p as E,af as I,F as N,g as T,O as R}from"./app-BIJ4Abzx.js";import{_ as h}from"./InputField.vue_vue_type_script_setup_true_lang-WGqTisw-.js";import{_ as U}from"./Listbox.vue_vue_type_script_setup_true_lang-CAARNOuk.js";import"./ApplicationLogo-DROgA_Il.js";import{_ as S}from"./Button.vue_vue_type_script_setup_true_lang-DYVpFlCb.js";import{_ as L}from"./Modal.vue_vue_type_script_setup_true_lang-xUl2RtN8.js";import"./PrimaryButton-D0pUaKYk.js";const j={class:"text-2xl font-semibold text-gray-800"},q={class:"text-gray-600 my-4"},Q=F({__name:"SubscriptionFormModal",props:{isOpen:{type:Boolean},micrositeSlug:{},subscriptionId:{},fields:{}},emits:["closeModal"],setup(w,{emit:x}){const{subscriptionId:C,micrositeSlug:V}=w,{t}=$(),p=D(),m=n({}),c=n({}),a=n(!1),k=n(null),B=x,d=()=>{B("closeModal")},O=e=>{switch(e){case"text":case"email":case"password":case"number":return h;case"select":return U;default:return h}},f=()=>{a.value=!0,R.post(route("subscription-payments.store",{microsite:V,subscription:C}),m.value,{preserveScroll:!0,onSuccess:()=>{p.success(t("common.form.success")),c.value={}},onError:e=>{console.log(e),p.error((e==null?void 0:e.payment)??t("common.form.error")),c.value=e??{}},onFinish:()=>{a.value=!1}})};return(e,_)=>(r(),b(o(L),{isOpen:e.isOpen,onClose:d},{footerButtons:l(()=>[y(o(S),{type:"button",variant:"secondary",color:"gray",onClick:d},{default:l(()=>[g(i(o(t)("common.cancel")),1)]),_:1}),y(o(S),{class:"col-span-2",loading:a.value,onClick:_[0]||(_[0]=()=>{f()}),disabled:a.value},{default:l(()=>[g(i(a.value?o(t)("common.loading"):o(t)("payments.show.subscription.form.submit")),1)]),_:1},8,["loading","disabled"])]),default:l(()=>[u("h2",j,i(o(t)("payments.show.subscription.form.title")),1),u("p",q,i(o(t)("payments.show.subscription.form.subTitle")),1),u("form",{ref_key:"formRef",ref:k,onSubmit:T(f,["prevent"]),class:"grid sm:grid-cols-2 gap-6"},[(r(!0),v(N,null,E(e.fields,s=>(r(),v("div",null,[(r(),b(I(O(s.type)),{id:s.name,type:s.type,name:s.name,label:s.label,modelValue:m.value[s.name],"onUpdate:modelValue":M=>m.value[s.name]=M,options:s.options,error:c.value[s.name]},null,8,["id","type","name","label","modelValue","onUpdate:modelValue","options","error"]))]))),256))],544)]),_:1},8,["isOpen"]))}});export{Q as _};
