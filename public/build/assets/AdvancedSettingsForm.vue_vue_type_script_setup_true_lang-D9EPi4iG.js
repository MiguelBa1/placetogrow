import{d as k,m as x,u as I,T as S,o as n,h as f,e,F as b,a as i,i as T,b as N,w as C,f as F,g as O,O as B}from"./app-BCmDl1Zp.js";import{_ as u}from"./InputField.vue_vue_type_script_setup_true_lang-BEbZPdTR.js";import{_ as U}from"./Listbox.vue_vue_type_script_setup_true_lang-EDYgO1Uf.js";import"./ApplicationLogo-BR7ADdCp.js";import{_ as E}from"./Button.vue_vue_type_script_setup_true_lang-Y_b8n5pJ.js";import"./PrimaryButton-CcCgdORT.js";import{M as m}from"./MicrositeType-BEFvDBeJ.js";import"./dayjs.min-Cm2y4O4P.js";const M={class:"col-span-2"},D=k({__name:"AdvancedSettingsForm",props:{microsite:{},lateFeeTypes:{}},setup(g){var d,p,c,y;const _=x(),{t:l}=I(),{microsite:a}=g,r=S({max_retries:(d=a.settings.retry)==null?void 0:d.max_retries,retry_backoff:(p=a.settings.retry)==null?void 0:p.retry_backoff,late_fee_type:(c=a.settings.late_fee)==null?void 0:c.type,late_fee_value:(y=a.settings.late_fee)==null?void 0:y.value}),V=async()=>{const o={retry:null,late_fee:null};a.type===m.INVOICE?o.late_fee={type:r.late_fee_type,value:r.late_fee_value}:a.type===m.SUBSCRIPTION&&(o.retry={max_retries:r.max_retries,retry_backoff:r.retry_backoff});const t={settings:o};B.post(route("microsites.update.settings",a),t,{preserveScroll:!0,onSuccess:()=>{_.success(l("microsites.edit.settings.saved"))},onError:s=>{Object.values(s).flat().forEach(v=>{_.error(v,{timeout:5e3})})}})};return(o,t)=>(n(),f("form",{class:"grid grid-cols-1 gap-6 md:grid-cols-2",onSubmit:O(V,["prevent"])},[o.microsite.type===e(m).INVOICE?(n(),f(b,{key:0},[i(e(U),{required:"",options:o.lateFeeTypes,modelValue:e(r).late_fee_type,"onUpdate:modelValue":t[0]||(t[0]=s=>e(r).late_fee_type=s),label:e(l)("microsites.edit.settings.lateFeeType"),errors:e(r).errors.late_fee_type},null,8,["options","modelValue","label","errors"]),i(e(u),{required:"",id:"late_fee_value",type:"number",label:e(l)("microsites.edit.settings.lateFeeValue"),min:0,modelValue:e(r).late_fee_value,"onUpdate:modelValue":t[1]||(t[1]=s=>e(r).late_fee_value=s),errors:e(r).errors.late_fee_value},null,8,["label","modelValue","errors"])],64)):o.microsite.type===e(m).SUBSCRIPTION?(n(),f(b,{key:1},[i(e(u),{required:"",id:"max_retries",type:"number",label:e(l)("microsites.edit.settings.maxRetries"),min:1,modelValue:e(r).max_retries,"onUpdate:modelValue":t[2]||(t[2]=s=>e(r).max_retries=s),errors:e(r).errors.max_retries},null,8,["label","modelValue","errors"]),i(e(u),{required:"",id:"retry_backoff",type:"number",label:e(l)("microsites.edit.settings.retryBackoff"),min:1,modelValue:e(r).retry_backoff,"onUpdate:modelValue":t[3]||(t[3]=s=>e(r).retry_backoff=s),errors:e(r).errors.retry_backoff},null,8,["label","modelValue","errors"])],64)):T("",!0),N("div",M,[i(e(E),{type:"submit",variant:"primary"},{default:C(()=>[F("Guardar")]),_:1})])],32))}});export{D as _};
