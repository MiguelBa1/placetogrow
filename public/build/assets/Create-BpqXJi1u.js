import{d as S,m as B,u as C,r as F,L as v,o as f,h as _,a as n,w as c,b as r,t as m,e,Z as N,f as q,F as U,p as D,g as E,O as L}from"./app-BIJ4Abzx.js";import{_ as O}from"./MainLayout.vue_vue_type_script_setup_true_lang-C15JnSKh.js";import{_ as p}from"./InputField.vue_vue_type_script_setup_true_lang-WGqTisw-.js";import{_ as T}from"./Listbox.vue_vue_type_script_setup_true_lang-CAARNOuk.js";import"./ApplicationLogo-DROgA_Il.js";import{r as j,_ as I}from"./GlobeAmericasIcon-BXdW9Tm9.js";import{_ as h}from"./Button.vue_vue_type_script_setup_true_lang-DYVpFlCb.js";import"./PrimaryButton-D0pUaKYk.js";import"./keyboard-DTd2mA90.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const M={class:"flex justify-between items-center"},Z={class:"font-semibold text-xl text-gray-800 leading-tight"},z={class:"space-x-2"},A={class:"flex items-center gap-1 text-lg font-medium text-gray-900"},te=S({__name:"Create",props:{microsite:{},timeUnits:{}},setup(x){const g=B(),{t:i}=C(),{microsite:k,timeUnits:G}=x,d=F(!1),l=v({price:void 0,total_duration:void 0,billing_frequency:void 0,time_unit:void 0,translations:[{locale:"en",name:"",description:""},{locale:"es",name:"",description:""}]}),a=v({price:"",total_duration:"",billing_frequency:"",time_unit:"",translations:[{name:"",description:""},{name:"",description:""}]}),w=()=>{d.value=!0,L.post(route("microsites.subscriptions.store",k),l,{preserveScroll:!0,onSuccess:()=>{g.success(i("subscriptions.create.success")),d.value=!1},onError:t=>{g.error(i("subscriptions.create.error")),a.price=t==null?void 0:t.price,a.total_duration=t==null?void 0:t.total_duration,a.billing_frequency=t==null?void 0:t.billing_frequency,a.time_unit=t==null?void 0:t.time_unit,a.translations=[{name:t["translations.0.name"],description:t["translations.0.description"]},{name:t["translations.1.name"],description:t["translations.1.description"]}]},onFinish:()=>{d.value=!1}})},$=()=>{history.back()};return(t,o)=>(f(),_(U,null,[n(e(N),null,{default:c(()=>[r("title",null,`
            `+m(e(i)("subscriptions.create.header"))+`
        `,1)]),_:1}),n(e(O),null,{header:c(()=>[r("div",M,[r("h2",Z,m(e(i)("subscriptions.create.header")),1),r("div",z,[n(e(h),{variant:"secondary",color:"gray",onClick:$},{default:c(()=>[q(m(e(i)("common.back")),1)]),_:1})])])]),default:c(()=>[r("form",{onSubmit:E(w,["prevent"]),class:"w-full p-4 sm:p-8 bg-white shadow sm:rounded-lg grid grid-cols-2 gap-4"},[n(e(p),{id:"price",type:"number",label:e(i)("subscriptions.create.form.price"),modelValue:l.price,"onUpdate:modelValue":o[0]||(o[0]=s=>l.price=s),error:a.price,required:""},null,8,["label","modelValue","error"]),n(e(p),{id:"total_duration",type:"number",label:e(i)("subscriptions.create.form.totalDuration"),modelValue:l.total_duration,"onUpdate:modelValue":o[1]||(o[1]=s=>l.total_duration=s),error:a.total_duration,required:""},null,8,["label","modelValue","error"]),n(e(p),{id:"billing_frequency",type:"number",label:e(i)("subscriptions.create.form.billingFrequency"),modelValue:l.billing_frequency,"onUpdate:modelValue":o[2]||(o[2]=s=>l.billing_frequency=s),error:a.billing_frequency,required:""},null,8,["label","modelValue","error"]),n(e(T),{id:"time_unit",label:e(i)("subscriptions.create.form.timeUnit"),modelValue:l.time_unit,"onUpdate:modelValue":o[3]||(o[3]=s=>l.time_unit=s),options:t.timeUnits,error:a.time_unit,required:""},null,8,["label","modelValue","options","error"]),(f(!0),_(U,null,D(l.translations,(s,u)=>{var y,V;return f(),_("div",{key:u,class:"col-span-2 space-y-4"},[r("h3",A,[n(e(j),{class:"h-5 w-5 inline-block text-blue-500"}),r("span",null,m(e(i)("subscriptions.create.form.content",{locale:s.locale})),1)]),n(e(p),{id:`translation-name-${u}`,type:"text",label:e(i)("subscriptions.create.form.name"),modelValue:s.name,"onUpdate:modelValue":b=>s.name=b,error:(y=a.translations[u])==null?void 0:y.name},null,8,["id","label","modelValue","onUpdate:modelValue","error"]),n(e(I),{id:`translation-description-${u}`,label:e(i)("subscriptions.create.form.description"),modelValue:s.description,"onUpdate:modelValue":b=>s.description=b,error:(V=a.translations[u])==null?void 0:V.description},null,8,["id","label","modelValue","onUpdate:modelValue","error"])])}),128)),r("div",null,[n(e(h),{type:"submit",class:"col-span-2"},{default:c(()=>[q(m(d.value?e(i)("common.loading"):e(i)("common.create")),1)]),_:1})])],32)]),_:1})],64))}});export{te as default};
