import{d as $,u as w,m as x,r as c,T as O,o as m,h as T,b as i,a as n,w as u,f as _,t as v,e as s,c as y,i as g,F as B}from"./app-BIJ4Abzx.js";import"./ApplicationLogo-DROgA_Il.js";import{_ as M}from"./Button.vue_vue_type_script_setup_true_lang-DYVpFlCb.js";import{_ as N}from"./DataTable.vue_vue_type_script_setup_true_lang-CUycw6XG.js";import"./PrimaryButton-D0pUaKYk.js";import{_ as V}from"./CreateFieldModal.vue_vue_type_script_setup_true_lang--4zyhKR7.js";import{_ as E}from"./EditFieldModal.vue_vue_type_script_setup_true_lang-xK1C61fG.js";import"./dayjs.min-Dm1FWret.js";import{r as j}from"./PencilSquareIcon-CCWOJicL.js";import{r as D}from"./TrashIcon-dHQxvpEe.js";const I={class:"space-y-4"},q={class:"flex justify-start"},z=["disabled"],A=["disabled","onClick"],G=["disabled","onClick"],ee=$({__name:"FieldsTable",props:{micrositeSlug:{},fields:{}},setup(t){const{t:d}=w(),f=x(),{micrositeSlug:k,fields:J}=t,C=H(d),a=c(!1),r=c(!1),p=c(null),h=o=>{p.value=o,r.value=!0},b=O({}),S=o=>{b.delete(route("microsites.fields.destroy",[k,o.id]),{onSuccess:()=>{f.success(d("microsites.show.fields.deletion.success"))},onError:l=>{f.error(l[0])},preserveScroll:!0})};return(o,l)=>(m(),T(B,null,[i("div",I,[i("div",q,[n(s(M),{onClick:l[0]||(l[0]=e=>a.value=!0)},{default:u(()=>[_(v(s(d)("microsites.show.fields.create")),1)]),_:1})]),n(s(N),{columns:s(C),rows:o.fields.data,class:"rounded-lg"},{"cell-name":u(({row:e})=>[_(v(e.modifiable?e.name:e.name+" (system)"),1)]),"cell-actions":u(({row:e})=>[i("fieldset",{disabled:s(b).processing,class:"flex justify-center gap-1"},[i("button",{disabled:e.modifiable===!1,class:"text-blue-600 hover:text-blue-900 disabled:opacity-50 disabled:cursor-not-allowed",onClick:F=>h(e)},[n(s(j),{class:"w-5 h-5"})],8,A),i("button",{disabled:e.modifiable===!1,class:"text-red-600 hover:text-red-900 disabled:opacity-50 disabled:cursor-not-allowed",onClick:F=>S(e)},[n(s(D),{class:"w-5 h-5"})],8,G)],8,z)]),_:1},8,["columns","rows"])]),a.value?(m(),y(s(V),{key:0,isOpen:a.value,micrositeSlug:o.micrositeSlug,onCloseModal:l[1]||(l[1]=e=>a.value=!1)},null,8,["isOpen","micrositeSlug"])):g("",!0),r.value?(m(),y(s(E),{key:1,isOpen:r.value,field:p.value,micrositeSlug:o.micrositeSlug,onCloseModal:l[2]||(l[2]=e=>r.value=!1)},null,8,["isOpen","field","micrositeSlug"])):g("",!0)],64))}}),H=t=>[{key:"name",label:t("microsites.show.fields.name")},{key:"label",label:t("microsites.show.fields.label")},{key:"type",label:t("microsites.show.fields.type")},{key:"actions",label:t("microsites.show.fields.actions")}];export{ee as _};
