import{d as S,m as B,u as C,r as F,U as v,o as _,h as b,a as i,w as u,b as r,t as c,e,Z as D,f as q,F as U,D as N,g as E,O}from"./app-BCmDl1Zp.js";import{_ as T}from"./MainLayout.vue_vue_type_script_setup_true_lang-B9ftLfNw.js";import{_ as p}from"./InputField.vue_vue_type_script_setup_true_lang-BEbZPdTR.js";import{_ as j}from"./Listbox.vue_vue_type_script_setup_true_lang-EDYgO1Uf.js";import"./ApplicationLogo-BR7ADdCp.js";import{r as I,_ as L}from"./GlobeAmericasIcon-DK3RHF3a.js";import{_ as h}from"./Button.vue_vue_type_script_setup_true_lang-Y_b8n5pJ.js";import"./PrimaryButton-CcCgdORT.js";import"./keyboard-BLIVt2fl.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const M={class:"flex justify-between items-center"},Z={class:"font-semibold text-xl text-gray-800 leading-tight"},z={class:"space-x-2"},A={class:"flex items-center gap-1 text-lg font-medium text-gray-900"},te=S({__name:"Create",props:{microsite:{},timeUnits:{}},setup(x){const g=B(),{t:a}=C(),{microsite:k,timeUnits:G}=x,d=F(!1),o=v({price:void 0,total_duration:void 0,billing_frequency:void 0,time_unit:void 0,translations:[{locale:"en",name:"",description:""},{locale:"es",name:"",description:""}]}),n=v({price:"",total_duration:"",billing_frequency:"",time_unit:"",translations:[{name:"",description:""},{name:"",description:""}]}),w=()=>{d.value=!0,O.post(route("microsites.plans.store",k),o,{preserveScroll:!0,onSuccess:()=>{g.success(a("plans.create.success")),d.value=!1},onError:t=>{g.error(a("plans.create.error")),n.price=t==null?void 0:t.price,n.total_duration=t==null?void 0:t.total_duration,n.billing_frequency=t==null?void 0:t.billing_frequency,n.time_unit=t==null?void 0:t.time_unit,n.translations=[{name:t["translations.0.name"],description:t["translations.0.description"]},{name:t["translations.1.name"],description:t["translations.1.description"]}]},onFinish:()=>{d.value=!1}})},$=()=>{history.back()};return(t,s)=>(_(),b(U,null,[i(e(D),null,{default:u(()=>[r("title",null,`
            `+c(e(a)("plans.create.header"))+`
        `,1)]),_:1}),i(e(T),null,{header:u(()=>[r("div",M,[r("h2",Z,c(e(a)("plans.create.header")),1),r("div",z,[i(e(h),{variant:"secondary",color:"gray",onClick:$},{default:u(()=>[q(c(e(a)("common.back")),1)]),_:1})])])]),default:u(()=>[r("form",{onSubmit:E(w,["prevent"]),class:"w-full p-4 sm:p-8 bg-white shadow sm:rounded-lg grid grid-cols-2 gap-4"},[i(e(p),{id:"price",type:"number",label:e(a)("plans.create.form.price"),modelValue:o.price,"onUpdate:modelValue":s[0]||(s[0]=l=>o.price=l),error:n.price,required:""},null,8,["label","modelValue","error"]),i(e(p),{id:"total_duration",type:"number",label:e(a)("plans.create.form.totalDuration"),modelValue:o.total_duration,"onUpdate:modelValue":s[1]||(s[1]=l=>o.total_duration=l),error:n.total_duration,required:""},null,8,["label","modelValue","error"]),i(e(p),{id:"billing_frequency",type:"number",label:e(a)("plans.create.form.billingFrequency"),modelValue:o.billing_frequency,"onUpdate:modelValue":s[2]||(s[2]=l=>o.billing_frequency=l),error:n.billing_frequency,required:""},null,8,["label","modelValue","error"]),i(e(j),{id:"time_unit",label:e(a)("plans.create.form.timeUnit"),modelValue:o.time_unit,"onUpdate:modelValue":s[3]||(s[3]=l=>o.time_unit=l),options:t.timeUnits,error:n.time_unit,required:""},null,8,["label","modelValue","options","error"]),(_(!0),b(U,null,N(o.translations,(l,m)=>{var y,V;return _(),b("div",{key:m,class:"col-span-2 space-y-4"},[r("h3",A,[i(e(I),{class:"h-5 w-5 inline-block text-blue-500"}),r("span",null,c(e(a)("plans.create.form.content",{locale:l.locale})),1)]),i(e(p),{id:`translation-name-${m}`,type:"text",label:e(a)("plans.create.form.name"),modelValue:l.name,"onUpdate:modelValue":f=>l.name=f,error:(y=n.translations[m])==null?void 0:y.name},null,8,["id","label","modelValue","onUpdate:modelValue","error"]),i(e(L),{id:`translation-description-${m}`,label:e(a)("plans.create.form.description"),modelValue:l.description,"onUpdate:modelValue":f=>l.description=f,error:(V=n.translations[m])==null?void 0:V.description},null,8,["id","label","modelValue","onUpdate:modelValue","error"])])}),128)),r("div",null,[i(e(h),{type:"submit",class:"col-span-2"},{default:u(()=>[q(c(d.value?e(a)("common.loading"):e(a)("common.create")),1)]),_:1})])],32)]),_:1})],64))}});export{te as default};
