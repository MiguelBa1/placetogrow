import{d as $,m as B,u as C,r as F,L as U,o as f,h as g,a as l,w as m,b as r,t as d,e,Z as E,f as h,F as x,p as N,g as D,O as L}from"./app-BIJ4Abzx.js";import{_ as O}from"./MainLayout.vue_vue_type_script_setup_true_lang-C15JnSKh.js";import{_ as c}from"./InputField.vue_vue_type_script_setup_true_lang-WGqTisw-.js";import{_ as T}from"./Listbox.vue_vue_type_script_setup_true_lang-CAARNOuk.js";import"./ApplicationLogo-DROgA_Il.js";import{r as j,_ as I}from"./GlobeAmericasIcon-BXdW9Tm9.js";import{_ as q}from"./Button.vue_vue_type_script_setup_true_lang-DYVpFlCb.js";import"./PrimaryButton-D0pUaKYk.js";import"./keyboard-DTd2mA90.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const M={class:"flex justify-between items-center"},Z={class:"font-semibold text-xl text-gray-800 leading-tight"},z={class:"space-x-2"},A={class:"flex items-center gap-1 text-lg font-medium text-gray-900"},G={class:"col-span-2"},ie=$({__name:"Edit",props:{microsite:{},timeUnits:{},subscription:{}},setup(k){const y=B(),{t:i}=C(),{microsite:w,timeUnits:H,subscription:u}=k,p=F(!1),o=U({price:u.price,total_duration:u.total_duration,billing_frequency:u.billing_frequency,time_unit:u.time_unit,translations:u.translations}),n=U({price:"",total_duration:"",billing_frequency:"",time_unit:"",translations:[{name:"",description:""},{name:"",description:""}]}),V=()=>{p.value=!0,L.put(route("microsites.subscriptions.update",{microsite:w,subscription:u}),o,{preserveScroll:!0,onSuccess:()=>{y.success(i("subscriptions.edit.success"))},onError:t=>{n.price=t==null?void 0:t.price,n.total_duration=t==null?void 0:t.total_duration,n.billing_frequency=t==null?void 0:t.billing_frequency,n.time_unit=t==null?void 0:t.time_unit,n.translations=[{name:t["translations.0.name"],description:t["translations.0.description"]},{name:t["translations.1.name"],description:t["translations.1.description"]}],y.error(i("subscriptions.edit.error"))},onFinish:()=>{p.value=!1}})},S=()=>{history.back()};return(t,a)=>(f(),g(x,null,[l(e(E),null,{default:m(()=>[r("title",null,`
            `+d(e(i)("subscriptions.edit.title"))+`
        `,1)]),_:1}),l(e(O),null,{header:m(()=>[r("div",M,[r("h2",Z,d(e(i)("subscriptions.edit.header")),1),r("div",z,[l(e(q),{variant:"secondary",color:"gray",onClick:S},{default:m(()=>[h(d(e(i)("common.back")),1)]),_:1})])])]),default:m(()=>[r("form",{onSubmit:D(V,["prevent"]),class:"w-full p-4 sm:p-8 bg-white shadow sm:rounded-lg grid grid-cols-2 gap-4"},[l(e(c),{id:"price",modelValue:o.price,"onUpdate:modelValue":a[0]||(a[0]=s=>o.price=s),label:e(i)("subscriptions.edit.form.price"),type:"number",error:n.price},null,8,["modelValue","label","error"]),l(e(c),{id:"total_duration",modelValue:o.total_duration,"onUpdate:modelValue":a[1]||(a[1]=s=>o.total_duration=s),label:e(i)("subscriptions.edit.form.totalDuration"),type:"number",error:n.total_duration},null,8,["modelValue","label","error"]),l(e(T),{id:"time_unit",modelValue:o.time_unit,"onUpdate:modelValue":a[2]||(a[2]=s=>o.time_unit=s),label:e(i)("subscriptions.edit.form.timeUnit"),options:t.timeUnits,error:n.time_unit},null,8,["modelValue","label","options","error"]),l(e(c),{id:"billing_frequency",modelValue:o.billing_frequency,"onUpdate:modelValue":a[3]||(a[3]=s=>o.billing_frequency=s),label:e(i)("subscriptions.edit.form.billingFrequency"),type:"number",error:n.billing_frequency},null,8,["modelValue","label","error"]),(f(!0),g(x,null,N(o.translations,(s,_)=>{var v;return f(),g("div",{key:_,class:"col-span-2 space-y-4"},[r("h3",A,[l(e(j),{class:"h-5 w-5 inline-block text-blue-500"}),r("span",null,d(e(i)("subscriptions.edit.form.content",{locale:s.locale})),1)]),l(e(c),{id:"name",modelValue:s.name,"onUpdate:modelValue":b=>s.name=b,label:e(i)("subscriptions.edit.form.name"),type:"text",error:n.translations[_].name},null,8,["modelValue","onUpdate:modelValue","label","error"]),l(e(I),{id:"description",modelValue:s.description,"onUpdate:modelValue":b=>s.description=b,label:e(i)("subscriptions.edit.form.description"),error:(v=n.translations[_])==null?void 0:v.description,rows:6},null,8,["modelValue","onUpdate:modelValue","label","error"])])}),128)),r("div",G,[l(e(q),{variant:"primary",onClick:V},{default:m(()=>[h(d(p.value?e(i)("common.loading"):e(i)("common.form.save")),1)]),_:1})])],32)]),_:1})],64))}});export{ie as default};
