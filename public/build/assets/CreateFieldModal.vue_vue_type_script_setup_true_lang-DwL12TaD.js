import{d as q,u as C,p as F,T as S,m as k,o as c,c as f,w as n,a as t,f as y,t as V,e,b as T,i as U,g as $}from"./app-Bpvmybdt.js";import{_ as a}from"./InputField.vue_vue_type_script_setup_true_lang-CfQ2MUfz.js";import{_ as B}from"./Listbox.vue_vue_type_script_setup_true_lang-DSl_v-Rk.js";import"./ApplicationLogo-B_getK0f.js";import{_ as b}from"./Button.vue_vue_type_script_setup_true_lang-3Poo1hdF.js";import{_ as O}from"./Modal.vue_vue_type_script_setup_true_lang-CggkL3MU.js";import"./PrimaryButton-DxnYWVKS.js";import"./dayjs.min-DfHwKj4N.js";import{u as N}from"./useFIeldTypesQuery-Dku_4Koo.js";const z=q({__name:"CreateFieldModal",props:{isOpen:{type:Boolean},micrositeSlug:{}},emits:["closeModal"],setup(_,{emit:M}){const{t:r}=C(),{isOpen:v,micrositeSlug:p}=_,{data:w,isLoading:g}=N({enabled:v}),d=M,u=F(),o=S({name:"",type:"",validation_rules:"",translation_es:"",translation_en:"",options:""}),m=k(null),x=()=>{m.value&&m.value.requestSubmit()},h=()=>{if(!p){console.log("Microsite slug is required");return}o.transform(i=>{var l;return{...i,options:i.type==="select"?i.options.split(",").map(s=>s.trim()):null,validation_rules:(l=i.validation_rules)==null?void 0:l.split(",").map(s=>s.trim()).join("|")}}).post(route("microsites.fields.store",p),{onSuccess:()=>{u.success(r("microsites.show.fields.creationModal.success")),o.reset(),d("closeModal")},onError:()=>{u.error(r("microsites.show.fields.creationModal.error"))},preserveScroll:!0})};return(i,l)=>(c(),f(e(O),{title:e(r)("microsites.show.fields.creationModal.title"),isOpen:i.isOpen,onClose:l[7]||(l[7]=s=>d("closeModal"))},{footerButtons:n(()=>[t(e(b),{type:"button",variant:"secondary",onClick:l[6]||(l[6]=s=>d("closeModal"))},{default:n(()=>[y(V(e(r)("microsites.show.fields.creationModal.cancel")),1)]),_:1}),t(e(b),{type:"button",color:"green",onClick:x,disabled:e(o).processing},{default:n(()=>[y(V(e(r)("microsites.show.fields.creationModal.save")),1)]),_:1},8,["disabled"])]),default:n(()=>[T("form",{ref_key:"createFormRef",ref:m,onSubmit:$(h,["prevent"]),class:"space-y-2"},[t(e(a),{id:"field-name",type:"text",modelValue:e(o).name,"onUpdate:modelValue":l[0]||(l[0]=s=>e(o).name=s),required:"",label:e(r)("microsites.show.fields.creationModal.name"),error:e(o).errors.name},null,8,["modelValue","label","error"]),t(e(B),{id:"field-type",modelValue:e(o).type,"onUpdate:modelValue":l[1]||(l[1]=s=>e(o).type=s),required:"",label:e(r)("microsites.show.fields.creationModal.type"),error:e(o).errors.type,options:e(w)??[],placeholder:e(g)?e(r)("common.loading"):e(r)("common.select")},null,8,["modelValue","label","error","options","placeholder"]),e(o).type==="select"?(c(),f(e(a),{key:0,id:"field-options",type:"text",modelValue:e(o).options,"onUpdate:modelValue":l[2]||(l[2]=s=>e(o).options=s),required:"",label:e(r)("microsites.show.fields.creationModal.options"),error:e(o).errors.options,placeholder:e(r)("microsites.show.fields.creationModal.optionsPlaceholder")},null,8,["modelValue","label","error","placeholder"])):U("",!0),t(e(a),{id:"field-validation-rules",type:"text",modelValue:e(o).validation_rules,"onUpdate:modelValue":l[3]||(l[3]=s=>e(o).validation_rules=s),label:e(r)("microsites.show.fields.creationModal.validationRules"),error:e(o).errors.validation_rules,placeholder:e(r)("microsites.show.fields.validationRulesHelp")},null,8,["modelValue","label","error","placeholder"]),t(e(a),{id:"field-translations-es",type:"text",required:"",modelValue:e(o).translation_es,"onUpdate:modelValue":l[4]||(l[4]=s=>e(o).translation_es=s),label:e(r)("microsites.show.fields.creationModal.translations.es"),error:e(o).errors.translation_es},null,8,["modelValue","label","error"]),t(e(a),{id:"field-translations-en",type:"text",required:"",modelValue:e(o).translation_en,"onUpdate:modelValue":l[5]||(l[5]=s=>e(o).translation_en=s),label:e(r)("microsites.show.fields.creationModal.translations.en"),error:e(o).errors.translation_en},null,8,["modelValue","label","error"])],544)]),_:1},8,["title","isOpen"]))}});export{z as _};
