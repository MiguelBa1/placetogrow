import{r as y,j as g,x as U,E as le,d as j,I as de,q as ae,G,F as oe,B as ve,J as pe,R as w,N as V,o as T,h as E,b as N,u as ce,a as B,w as A,c as J,f as fe,t as z,e as I,i as Q,n as M,C as be,p as me}from"./app-BIJ4Abzx.js";import{o as h,a as $,b as ge,m as he,n as xe,h as ye,f as Oe,E as Se,u as we,A as _,j as Le,I as K,l as De,d as W,O as Re,g as x,e as H}from"./keyboard-DTd2mA90.js";function ke(e,o,l){let i=y(l==null?void 0:l.value),r=g(()=>e.value!==void 0);return[g(()=>r.value?e.value:i.value),function(a){return r.value||(i.value=a),o==null?void 0:o(a)}]}function X(e,o){if(e)return e;let l=o??"button";if(typeof l=="string"&&l.toLowerCase()==="button")return"button"}function Te(e,o){let l=y(X(e.value.type,e.value.as));return U(()=>{l.value=X(e.value.type,e.value.as)}),le(()=>{var i;l.value||h(o)&&h(o)instanceof HTMLButtonElement&&!((i=h(o))!=null&&i.hasAttribute("type"))&&(l.value="button")}),l}function Y(e){return[e.screenX,e.screenY]}function $e(){let e=y([-1,-1]);return{wasMoved(o){let l=Y(o);return e.value[0]===l[0]&&e.value[1]===l[1]?!1:(e.value=l,!0)},update(o){e.value=Y(o)}}}function Ce(e){throw new Error("Unexpected object: "+e)}var O=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(O||{});function Pe(e,o){let l=o.resolveItems();if(l.length<=0)return null;let i=o.resolveActiveIndex(),r=i??-1;switch(e.focus){case 0:{for(let a=0;a<l.length;++a)if(!o.resolveDisabled(l[a],a,l))return a;return i}case 1:{r===-1&&(r=l.length);for(let a=r-1;a>=0;--a)if(!o.resolveDisabled(l[a],a,l))return a;return i}case 2:{for(let a=r+1;a<l.length;++a)if(!o.resolveDisabled(l[a],a,l))return a;return i}case 3:{for(let a=l.length-1;a>=0;--a)if(!o.resolveDisabled(l[a],a,l))return a;return i}case 4:{for(let a=0;a<l.length;++a)if(o.resolveId(l[a],a,l)===e.id)return a;return i}case 5:return null;default:Ce(e)}}function ne(e={},o=null,l=[]){for(let[i,r]of Object.entries(e))ue(l,re(o,i),r);return l}function re(e,o){return e?e+"["+o+"]":o}function ue(e,o,l){if(Array.isArray(l))for(let[i,r]of l.entries())ue(e,re(o,i.toString()),r);else l instanceof Date?e.push([o,l.toISOString()]):typeof l=="boolean"?e.push([o,l?"1":"0"]):typeof l=="string"?e.push([o,l]):typeof l=="number"?e.push([o,`${l}`]):l==null?e.push([o,""]):ne(l,o,e)}let ee=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function te(e){var o,l;let i=(o=e.innerText)!=null?o:"",r=e.cloneNode(!0);if(!(r instanceof HTMLElement))return i;let a=!1;for(let c of r.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))c.remove(),a=!0;let t=a?(l=r.innerText)!=null?l:"":i;return ee.test(t)&&(t=t.replace(ee,"")),t}function Fe(e){let o=e.getAttribute("aria-label");if(typeof o=="string")return o.trim();let l=e.getAttribute("aria-labelledby");if(l){let i=l.split(" ").map(r=>{let a=document.getElementById(r);if(a){let t=a.getAttribute("aria-label");return typeof t=="string"?t.trim():te(a).trim()}return null}).filter(Boolean);if(i.length>0)return i.join(", ")}return te(e).trim()}function Ie(e){let o=y(""),l=y("");return()=>{let i=h(e);if(!i)return"";let r=i.innerText;if(o.value===r)return l.value;let a=Fe(i).trim().toLowerCase();return o.value=r,l.value=a,a}}function Ve(e,o){return e===o}var Be=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Be||{}),Ae=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(Ae||{}),Ee=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(Ee||{});function Ne(e){requestAnimationFrame(()=>requestAnimationFrame(e))}let ie=Symbol("ListboxContext");function q(e){let o=pe(ie,null);if(o===null){let l=new Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(l,q),l}return o}let je=j({name:"Listbox",emits:{"update:modelValue":e=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],default:()=>Ve},horizontal:{type:[Boolean],default:!1},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},multiple:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(e,{slots:o,attrs:l,emit:i}){let r=y(1),a=y(null),t=y(null),c=y(null),d=y([]),m=y(""),f=y(null),u=y(1);function v(n=s=>s){let s=f.value!==null?d.value[f.value]:null,p=Re(n(d.value.slice()),S=>h(S.dataRef.domRef)),b=s?p.indexOf(s):null;return b===-1&&(b=null),{options:p,activeOptionIndex:b}}let D=g(()=>e.multiple?1:0),[R,L]=ke(g(()=>e.modelValue),n=>i("update:modelValue",n),g(()=>e.defaultValue)),C=g(()=>R.value===void 0?$(D.value,{1:[],0:void 0}):R.value),k={listboxState:r,value:C,mode:D,compare(n,s){if(typeof e.by=="string"){let p=e.by;return(n==null?void 0:n[p])===(s==null?void 0:s[p])}return e.by(n,s)},orientation:g(()=>e.horizontal?"horizontal":"vertical"),labelRef:a,buttonRef:t,optionsRef:c,disabled:g(()=>e.disabled),options:d,searchQuery:m,activeOptionIndex:f,activationTrigger:u,closeListbox(){e.disabled||r.value!==1&&(r.value=1,f.value=null)},openListbox(){e.disabled||r.value!==0&&(r.value=0)},goToOption(n,s,p){if(e.disabled||r.value===1)return;let b=v(),S=Pe(n===O.Specific?{focus:O.Specific,id:s}:{focus:n},{resolveItems:()=>b.options,resolveActiveIndex:()=>b.activeOptionIndex,resolveId:F=>F.id,resolveDisabled:F=>F.dataRef.disabled});m.value="",f.value=S,u.value=p??1,d.value=b.options},search(n){if(e.disabled||r.value===1)return;let s=m.value!==""?0:1;m.value+=n.toLowerCase();let p=(f.value!==null?d.value.slice(f.value+s).concat(d.value.slice(0,f.value+s)):d.value).find(S=>S.dataRef.textValue.startsWith(m.value)&&!S.dataRef.disabled),b=p?d.value.indexOf(p):-1;b===-1||b===f.value||(f.value=b,u.value=1)},clearSearch(){e.disabled||r.value!==1&&m.value!==""&&(m.value="")},registerOption(n,s){let p=v(b=>[...b,{id:n,dataRef:s}]);d.value=p.options,f.value=p.activeOptionIndex},unregisterOption(n){let s=v(p=>{let b=p.findIndex(S=>S.id===n);return b!==-1&&p.splice(b,1),p});d.value=s.options,f.value=s.activeOptionIndex,u.value=1},theirOnChange(n){e.disabled||L(n)},select(n){e.disabled||L($(D.value,{0:()=>n,1:()=>{let s=w(k.value.value).slice(),p=w(n),b=s.findIndex(S=>k.compare(p,w(S)));return b===-1?s.push(p):s.splice(b,1),s}}))}};ge([t,c],(n,s)=>{var p;k.closeListbox(),he(s,xe.Loose)||(n.preventDefault(),(p=h(t))==null||p.focus())},g(()=>r.value===0)),de(ie,k),ye(g(()=>$(r.value,{0:H.Open,1:H.Closed})));let P=g(()=>{var n;return(n=h(t))==null?void 0:n.closest("form")});return U(()=>{ae([P],()=>{if(!P.value||e.defaultValue===void 0)return;function n(){k.theirOnChange(e.defaultValue)}return P.value.addEventListener("reset",n),()=>{var s;(s=P.value)==null||s.removeEventListener("reset",n)}},{immediate:!0})}),()=>{let{name:n,modelValue:s,disabled:p,form:b,...S}=e,F={open:r.value===0,disabled:p,value:C.value};return G(oe,[...n!=null&&C.value!=null?ne({[n]:C.value}).map(([Z,se])=>G(Oe,Se({features:we.Hidden,key:Z,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:b,disabled:p,name:Z,value:se}))):[],_({ourProps:{},theirProps:{...l,...Le(S,["defaultValue","onUpdate:modelValue","horizontal","multiple","by"])},slot:F,slots:o,attrs:l,name:"Listbox"})])}}}),Me=j({name:"ListboxLabel",props:{as:{type:[Object,String],default:"label"},id:{type:String,default:null}},setup(e,{attrs:o,slots:l}){var i;let r=(i=e.id)!=null?i:`headlessui-listbox-label-${K()}`,a=q("ListboxLabel");function t(){var c;(c=h(a.buttonRef))==null||c.focus({preventScroll:!0})}return()=>{let c={open:a.listboxState.value===0,disabled:a.disabled.value},{...d}=e,m={id:r,ref:a.labelRef,onClick:t};return _({ourProps:m,theirProps:d,slot:c,attrs:o,slots:l,name:"ListboxLabel"})}}}),_e=j({name:"ListboxButton",props:{as:{type:[Object,String],default:"button"},id:{type:String,default:null}},setup(e,{attrs:o,slots:l,expose:i}){var r;let a=(r=e.id)!=null?r:`headlessui-listbox-button-${K()}`,t=q("ListboxButton");i({el:t.buttonRef,$el:t.buttonRef});function c(u){switch(u.key){case x.Space:case x.Enter:case x.ArrowDown:u.preventDefault(),t.openListbox(),V(()=>{var v;(v=h(t.optionsRef))==null||v.focus({preventScroll:!0}),t.value.value||t.goToOption(O.First)});break;case x.ArrowUp:u.preventDefault(),t.openListbox(),V(()=>{var v;(v=h(t.optionsRef))==null||v.focus({preventScroll:!0}),t.value.value||t.goToOption(O.Last)});break}}function d(u){switch(u.key){case x.Space:u.preventDefault();break}}function m(u){t.disabled.value||(t.listboxState.value===0?(t.closeListbox(),V(()=>{var v;return(v=h(t.buttonRef))==null?void 0:v.focus({preventScroll:!0})})):(u.preventDefault(),t.openListbox(),Ne(()=>{var v;return(v=h(t.optionsRef))==null?void 0:v.focus({preventScroll:!0})})))}let f=Te(g(()=>({as:e.as,type:o.type})),t.buttonRef);return()=>{var u,v;let D={open:t.listboxState.value===0,disabled:t.disabled.value,value:t.value.value},{...R}=e,L={ref:t.buttonRef,id:a,type:f.value,"aria-haspopup":"listbox","aria-controls":(u=h(t.optionsRef))==null?void 0:u.id,"aria-expanded":t.listboxState.value===0,"aria-labelledby":t.labelRef.value?[(v=h(t.labelRef))==null?void 0:v.id,a].join(" "):void 0,disabled:t.disabled.value===!0?!0:void 0,onKeydown:c,onKeyup:d,onClick:m};return _({ourProps:L,theirProps:R,slot:D,attrs:o,slots:l,name:"ListboxButton"})}}}),qe=j({name:"ListboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null}},setup(e,{attrs:o,slots:l,expose:i}){var r;let a=(r=e.id)!=null?r:`headlessui-listbox-options-${K()}`,t=q("ListboxOptions"),c=y(null);i({el:t.optionsRef,$el:t.optionsRef});function d(u){switch(c.value&&clearTimeout(c.value),u.key){case x.Space:if(t.searchQuery.value!=="")return u.preventDefault(),u.stopPropagation(),t.search(u.key);case x.Enter:if(u.preventDefault(),u.stopPropagation(),t.activeOptionIndex.value!==null){let v=t.options.value[t.activeOptionIndex.value];t.select(v.dataRef.value)}t.mode.value===0&&(t.closeListbox(),V(()=>{var v;return(v=h(t.buttonRef))==null?void 0:v.focus({preventScroll:!0})}));break;case $(t.orientation.value,{vertical:x.ArrowDown,horizontal:x.ArrowRight}):return u.preventDefault(),u.stopPropagation(),t.goToOption(O.Next);case $(t.orientation.value,{vertical:x.ArrowUp,horizontal:x.ArrowLeft}):return u.preventDefault(),u.stopPropagation(),t.goToOption(O.Previous);case x.Home:case x.PageUp:return u.preventDefault(),u.stopPropagation(),t.goToOption(O.First);case x.End:case x.PageDown:return u.preventDefault(),u.stopPropagation(),t.goToOption(O.Last);case x.Escape:u.preventDefault(),u.stopPropagation(),t.closeListbox(),V(()=>{var v;return(v=h(t.buttonRef))==null?void 0:v.focus({preventScroll:!0})});break;case x.Tab:u.preventDefault(),u.stopPropagation();break;default:u.key.length===1&&(t.search(u.key),c.value=setTimeout(()=>t.clearSearch(),350));break}}let m=De(),f=g(()=>m!==null?(m.value&H.Open)===H.Open:t.listboxState.value===0);return()=>{var u,v;let D={open:t.listboxState.value===0},{...R}=e,L={"aria-activedescendant":t.activeOptionIndex.value===null||(u=t.options.value[t.activeOptionIndex.value])==null?void 0:u.id,"aria-multiselectable":t.mode.value===1?!0:void 0,"aria-labelledby":(v=h(t.buttonRef))==null?void 0:v.id,"aria-orientation":t.orientation.value,id:a,onKeydown:d,role:"listbox",tabIndex:0,ref:t.optionsRef};return _({ourProps:L,theirProps:R,slot:D,attrs:o,slots:l,features:W.RenderStrategy|W.Static,visible:f.value,name:"ListboxOptions"})}}}),ze=j({name:"ListboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1},id:{type:String,default:null}},setup(e,{slots:o,attrs:l,expose:i}){var r;let a=(r=e.id)!=null?r:`headlessui-listbox-option-${K()}`,t=q("ListboxOption"),c=y(null);i({el:c,$el:c});let d=g(()=>t.activeOptionIndex.value!==null?t.options.value[t.activeOptionIndex.value].id===a:!1),m=g(()=>$(t.mode.value,{0:()=>t.compare(w(t.value.value),w(e.value)),1:()=>w(t.value.value).some(n=>t.compare(w(n),w(e.value)))})),f=g(()=>$(t.mode.value,{1:()=>{var n;let s=w(t.value.value);return((n=t.options.value.find(p=>s.some(b=>t.compare(w(b),w(p.dataRef.value)))))==null?void 0:n.id)===a},0:()=>m.value})),u=Ie(c),v=g(()=>({disabled:e.disabled,value:e.value,get textValue(){return u()},domRef:c}));U(()=>t.registerOption(a,v)),ve(()=>t.unregisterOption(a)),U(()=>{ae([t.listboxState,m],()=>{t.listboxState.value===0&&m.value&&$(t.mode.value,{1:()=>{f.value&&t.goToOption(O.Specific,a)},0:()=>{t.goToOption(O.Specific,a)}})},{immediate:!0})}),le(()=>{t.listboxState.value===0&&d.value&&t.activationTrigger.value!==0&&V(()=>{var n,s;return(s=(n=h(c))==null?void 0:n.scrollIntoView)==null?void 0:s.call(n,{block:"nearest"})})});function D(n){if(e.disabled)return n.preventDefault();t.select(e.value),t.mode.value===0&&(t.closeListbox(),V(()=>{var s;return(s=h(t.buttonRef))==null?void 0:s.focus({preventScroll:!0})}))}function R(){if(e.disabled)return t.goToOption(O.Nothing);t.goToOption(O.Specific,a)}let L=$e();function C(n){L.update(n)}function k(n){L.wasMoved(n)&&(e.disabled||d.value||t.goToOption(O.Specific,a,0))}function P(n){L.wasMoved(n)&&(e.disabled||d.value&&t.goToOption(O.Nothing))}return()=>{let{disabled:n}=e,s={active:d.value,selected:m.value,disabled:n},{value:p,disabled:b,...S}=e,F={id:a,ref:c,role:"option",tabIndex:n===!0?void 0:-1,"aria-disabled":n===!0?!0:void 0,"aria-selected":m.value,disabled:void 0,onClick:D,onFocus:R,onPointerenter:C,onMouseenter:C,onPointermove:k,onMousemove:k,onPointerleave:P,onMouseleave:P};return _({ourProps:F,theirProps:S,slot:s,attrs:l,slots:o,name:"ListboxOption"})}}});function Ue(e,o){return T(),E("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[N("path",{"fill-rule":"evenodd",d:"M19.916 4.626a.75.75 0 0 1 .208 1.04l-9 13.5a.75.75 0 0 1-1.154.114l-6-6a.75.75 0 0 1 1.06-1.06l5.353 5.353 8.493-12.74a.75.75 0 0 1 1.04-.207Z","clip-rule":"evenodd"})])}function He(e,o){return T(),E("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[N("path",{"fill-rule":"evenodd",d:"M12.53 16.28a.75.75 0 0 1-1.06 0l-7.5-7.5a.75.75 0 0 1 1.06-1.06L12 14.69l6.97-6.97a.75.75 0 1 1 1.06 1.06l-7.5 7.5Z","clip-rule":"evenodd"})])}const Ke={class:"relative"},Qe={class:"absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none"},Ze={key:0,class:"mt-1 text-sm text-red-600"},Ge="relative w-full bg-white border rounded-md shadow-sm pl-3 pr-10 py-2 text-left cursor-default focus:outline-none focus:ring-1 sm:text-sm",Je="border-red-500 focus:ring-red-500",We="border-gray-300 focus:ring-blue-500",Xe="disabled:bg-gray-200 disabled:cursor-not-allowed",tt=j({__name:"Listbox",props:{id:{default:""},modelValue:{},options:{},label:{default:""},placeholder:{default:""},className:{default:""},error:{},disabled:{type:Boolean,default:!1},required:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:o}){const{t:l}=ce(),i=e,r=o,a=g({get(){return i.modelValue},set(d){r("update:modelValue",d)}}),t=g(()=>i.options.find(d=>d.value===a.value)),c=g(()=>i.placeholder||l("components.forms.listbox.placeholder"));return(d,m)=>(T(),E("div",{class:M(`w-full space-y-1 ${d.className}`)},[B(I(je),{modelValue:a.value,"onUpdate:modelValue":m[0]||(m[0]=f=>a.value=f),disabled:d.disabled},{default:A(()=>[d.label?(T(),J(I(Me),{key:0,for:d.id,class:"block text-sm font-medium text-gray-700"},{default:A(()=>[fe(z(d.label),1)]),_:1},8,["for"])):Q("",!0),N("div",Ke,[B(I(_e),{id:d.id,"aria-required":d.required,class:M([Ge,d.error?Je:We,d.disabled?Xe:""])},{default:A(()=>[N("span",{class:M(`block truncate ${t.value?"":"text-gray-400"}`)},z(t.value?t.value.label:c.value),3),N("span",Qe,[B(I(He),{class:"w-5 h-5 text-gray-400","aria-hidden":"true"})])]),_:1},8,["id","aria-required","class"]),B(be,{leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0"},{default:A(()=>[B(I(qe),{class:"absolute z-10 mt-1 w-full bg-white shadow-lg max-h-60 rounded-md py-1 text-base ring-1 ring-black ring-opacity-5 overflow-auto focus:outline-none sm:text-sm"},{default:A(()=>[(T(!0),E(oe,null,me(d.options,f=>(T(),J(I(ze),{key:f.value,value:f.value,class:"relative cursor-default select-none py-2 pl-10 pr-4 hover:bg-gray-100"},{default:A(({active:u,selected:v})=>[N("span",{class:M(`block truncate ${v?"font-medium":"font-normal"}`)},z(f.label),3),v?(T(),E("span",{key:0,class:M("absolute inset-y-0 left-0 flex items-center pl-3 text-blue-600")},[B(I(Ue),{class:"w-5 h-5","aria-hidden":"true"})],2)):Q("",!0)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})])]),_:1},8,["modelValue","disabled"]),d.error?(T(),E("p",Ze,z(d.error),1)):Q("",!0)],2))}});export{tt as _,Te as s};
