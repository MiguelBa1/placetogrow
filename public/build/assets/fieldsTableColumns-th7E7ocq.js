import{d as F,u as $,m as x,r as c,T as O,o as m,h as T,b as i,a as n,w as u,f as _,t as b,e as l,c as v,i as y,F as B}from"./app-BCmDl1Zp.js";import"./ApplicationLogo-BR7ADdCp.js";import{_ as M}from"./Button.vue_vue_type_script_setup_true_lang-Y_b8n5pJ.js";import{_ as N}from"./DataTable.vue_vue_type_script_setup_true_lang-Zkw0Oib1.js";import"./PrimaryButton-CcCgdORT.js";import{_ as V}from"./CreateFieldModal.vue_vue_type_script_setup_true_lang-JwOWwkRf.js";import{_ as E}from"./EditFieldModal.vue_vue_type_script_setup_true_lang-DvDMSgIP.js";import"./dayjs.min-Cm2y4O4P.js";import{r as j}from"./PencilSquareIcon-BenTN4fl.js";import{r as D}from"./TrashIcon-BF6Yi9L_.js";const I={class:"space-y-4"},q={class:"flex justify-start"},z=["disabled"],A=["onClick"],G=["onClick"],ee=F({__name:"FieldsTable",props:{micrositeSlug:{},fields:{}},setup(t){const{t:d}=$(),f=x(),{micrositeSlug:k,fields:J}=t,g=H(d),a=c(!1),r=c(!1),p=c(null),C=o=>{p.value=o,r.value=!0},h=O({}),S=o=>{h.delete(route("microsites.fields.destroy",[k,o.id]),{onSuccess:()=>{f.success(d("microsites.show.fields.deletion.success"))},onError:s=>{f.error(s[0])},preserveScroll:!0})};return(o,s)=>(m(),T(B,null,[i("div",I,[i("div",q,[n(l(M),{onClick:s[0]||(s[0]=e=>a.value=!0)},{default:u(()=>[_(b(l(d)("microsites.show.fields.create")),1)]),_:1})]),n(l(N),{columns:l(g),rows:o.fields.data,class:"rounded-lg"},{"cell-name":u(({row:e})=>[_(b(e.modifiable?e.name:e.name+" (system)"),1)]),"cell-actions":u(({row:e})=>[i("fieldset",{disabled:e.modifiable===!1,class:"flex justify-center gap-1"},[i("button",{class:"text-blue-600 hover:text-blue-900 disabled:opacity-50 disabled:cursor-not-allowed",onClick:w=>C(e)},[n(l(j),{class:"w-5 h-5"})],8,A),i("button",{class:"text-red-600 hover:text-red-900 disabled:opacity-50 disabled:cursor-not-allowed",onClick:w=>S(e)},[n(l(D),{class:"w-5 h-5"})],8,G)],8,z)]),_:1},8,["columns","rows"])]),a.value?(m(),v(l(V),{key:0,isOpen:a.value,micrositeSlug:o.micrositeSlug,onCloseModal:s[1]||(s[1]=e=>a.value=!1)},null,8,["isOpen","micrositeSlug"])):y("",!0),r.value?(m(),v(l(E),{key:1,isOpen:r.value,field:p.value,micrositeSlug:o.micrositeSlug,onCloseModal:s[2]||(s[2]=e=>r.value=!1)},null,8,["isOpen","field","micrositeSlug"])):y("",!0)],64))}}),H=t=>[{key:"label",label:t("microsites.show.fields.label")},{key:"name",label:t("microsites.show.fields.name")},{key:"type",label:t("microsites.show.fields.type")},{key:"actions",label:t("microsites.show.fields.actions")}];export{ee as _};
